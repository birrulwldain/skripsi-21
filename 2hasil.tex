%
% Template Laporan Tugas Akhir Jurusan Informatika Unsyiah 
%
% @author Abdul Hafidh
% @version 1.1
% @since 08.09.2023
%
% Template ini telah disesuaikan dengan aturan penulisan tugas akhir yang terdapat pada dokumen Panduan Tugas Akhir FMIPA Unsyiah tahun 2016.
%

% karena jifhasiltheme.cls ada di folder lib, maka kita harus menambahkan path lib/ ke dalam path pencarian file
\makeatletter
\def\input@path{{lib/}}
\makeatother
% Template pembuatan naskah tugas akhir.
\documentclass[dvipsnames]{2hasil}
\usepackage[style=apa, backend=biber, natbib=true]{biblatex}

\usepackage{enumitem}
\usepackage{float}
\usepackage{amsmath} % Untuk persamaan
\usepackage{algorithm} % Untuk lingkungan algoritma
\usepackage{algorithmic} % Untuk perintah seperti \State, \For
\usepackage{setspace} % Untuk spasi baris
\usepackage{chemformula} % Untuk rumus kimia
\usepackage{glossaries} % Untuk daftar istilah/akronim
\usepackage{booktabs} % Untuk tabel profesional
\usepackage{csquotes} % Untuk kutipan
\usepackage{tabularx} % Untuk tabel dengan kolom X
\usepackage{pifont} % Untuk simbol seperti tanda centang

% Definisi lingkungan algoritma
\newenvironment{algoritma}{\begin{algorithm}}{\end{algorithm}}
\floatname{algorithm}{Algoritma}

% Definisi akronim
\newacronym{libs}{LIBS}{\textit{Laser-Induced Breakdown Spectroscopy}}
\newacronym{ann}{ANN}{\textit{Artificial Neural Network}}
\newacronym{lstm}{LSTM}{\textit{Long Short-Term Memory}}

\addbibresource{daftar-pustaka.bib}
\DeclareLanguageMapping{bahasa}{english-apa}
\DeclareLabeldate{%
  \field{date}
  \field{year}
  \literal{n.d.}
}
\DefineBibliographyStrings{bahasa}{
  andothers   = {{dkk\adddot}},
  page        = {{hlm\adddot}},
  pages       = {{hlm\adddot}},
  in          = {{Dalam}},
  bibliography= {{DAFTAR KEPUSTAKAAN}},
  references  = {{DAFTAR KEPUSTAKAAN}}
}
\tolerance=1
\emergencystretch=\maxdimen
\hyphenpenalty=10000
\hbadness=10000

% karena file hype.indonesia.tex ada di folder language, maka kita harus menambahkan path language/ ke dalam path pencarian file
\makeatletter
\def\input@path{{language/}}
\makeatother
% Daftar pemenggalan suku kata dan istilah dalam LaTeX
\include{hype.indonesia}

% Untuk prefiks pada daftar gambar dan tabel
\usepackage[titles]{tocloft}

\usepackage{etoolbox}% http://ctan.org/pkg/etoolbox
\makeatletter
% \patchcmd{<cmd>}{<search>}{<replace>}{<succes>}{<failure>}
\patchcmd{\@chapter}{\addtocontents{lof}{\protect\addvspace{10\p@}}}{}{}{}% LoF
\patchcmd{\@chapter}{\addtocontents{lot}{\protect\addvspace{10\p@}}}{}{}{}% LoT
\makeatother

\usepackage[justification=centering]{caption}% atau misalnya [format=hang]

% Tambahan dari Budi
\newcommand*{\enableboldchapterintoc}{%
  \addtocontents{toc}{\string\renewcommand{\protect\cftchapfont}{\protect\normalfont\protect\bfseries}}%
  \addtocontents{toc}{\string\renewcommand{\protect\cftchappagefont}{\protect\normalfont\protect}}%
  \addtocontents{toc}{\protect\setlength{\cftbeforechapskip}{12pt}}%
}
\newcommand*{\disableboldchapterintoc}{%
  \addtocontents{toc}{\string\renewcommand{\protect\cftchappagefont}{\protect\normalfont}}%
  \addtocontents{toc}{\string\renewcommand{\protect\cftchapfont}{\protect\normalfont}}%
  \addtocontents{toc}{\protect\setlength{\cftbeforechapskip}{0pt}}%
}

\renewcommand{\cftdotsep}{0.5}
\renewcommand{\cftchapleader}{\cftdotfill{\cftdotsep}}

\renewcommand\cftfigpresnum{Gambar\  }
\renewcommand\cfttabpresnum{Tabel\   }

\addtocontents{toc}{~\hfill \textit{Halaman}\par} % Menambahkan kata "Halaman" di sebelah kanan daftar isi
\addtocontents{lof}{~\hfill \textit{Halaman}\par}
\addtocontents{lot}{~\hfill \textit{Halaman}\par}

% Mengatur daftar lampiran
\newcommand{\listappendicesname}{DAFTAR LAMPIRAN}
\newlistof{appendices}{apc}{\listappendicesname}
\makeatletter
\newcommand{\appendices}[1]{%
  \addcontentsline{apc}{appendices}{\protect\numberline{}#1}%
}
\makeatother
\newcounter{lampiran}
\newcommand{\lampiran}[1]{%
  \clearpage% Memulai halaman baru sebelum lampiran
  \refstepcounter{lampiran}% Increment counter lampiran
  \subsection*{Lampiran \thelampiran. #1}% Buat judul dengan format Lampiran <nomor>. <judul>
  \addcontentsline{apc}{appendices}{Lampiran \thelampiran. #1}%>{{DAFTAR LAMPIRAN}}
}

% Untuk hyperlink dan table of content
\usepackage[hidelinks]{hyperref}
\renewcommand\UrlFont{\rmfamily\itshape}
\newlength{\mylenf}
\settowidth{\mylenf}{\cftfigpresnum}
\setlength{\cftfignumwidth}{\dimexpr\mylenf+2em}
\setlength{\cfttabnumwidth}{\dimexpr\mylenf+2em}

% Agar ada tulisan BAB pada TOC
\renewcommand\cftchappresnum{BAB } 
\cftsetindents{chapter}{0em}{4.5em}
\cftsetindents{section}{4.5em}{2em}
\cftsetindents{subsection}{6.5em}{3em}

% Agar di TOC setiap angka bab/subbab diakhiri titik
\renewcommand{\cftsecaftersnum}{.}
\renewcommand{\cftsubsecaftersnum}{.}

% Judul section: kapital (namun daftar isi tetap non kapital)
\usepackage{titlesec}
\titlelabel{\thetitle.\quad}

% Untuk caption dan subcaption
\usepackage{caption}
\usepackage{subcaption}
\captionsetup[algorithm]{position=above}

\usepackage{amssymb}
\usepackage{color}

% Untuk tabel panjang
\usepackage{longtable}

% Untuk page landscape
\usepackage{pdflscape}
\usepackage{lscape}

% Untuk code snippet
\usepackage{lstautogobble}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{inconsolata}
\usepackage{adjustbox}
\lstset{
    basicstyle=\ttfamily\small,
    keywordstyle=\color{blue},
    commentstyle=\color{gray},
    stringstyle=\color{red},
    numbers=left,
    numberstyle=\tiny\color{gray},
    stepnumber=1,
    tabsize=4,
    showstringspaces=false,
    breaklines=true,
    frame=single,
    rulecolor=\color{lightgray},
    backgroundcolor=\color{white},
    literate=
        {á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
        {Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1
        {à}{{\`a}}1 {è}{{\`e}}1 {ì}{{\`i}}1 {ò}{{\`o}}1 {ù}{{\`u}}1
        {À}{{\`A}}1 {È}{{\'E}}1 {Ì}{{\`I}}1 {Ò}{{\`O}}1 {Ù}{{\`U}}1
        {ä}{{\"a}}1 {ë}{{\"e}}1 {ï}{{\"i}}1 {ö}{{\"o}}1 {ü}{{\"u}}1
        {Ä}{{\"A}}1 {Ë}{{\"E}}1 {Ï}{{\"I}}1 {Ö}{{\"O}}1 {Ü}{{\"U}}1
        {â}{{\^a}}1 {ê}{{\^e}}1 {î}{{\^i}}1 {ô}{{\^o}}1 {û}{{\^u}}1
        {Â}{{\^A}}1 {Ê}{{\^E}}1 {Î}{{\^I}}1 {Ô}{{\^O}}1 {Û}{{\^U}}1
        {œ}{{\oe}}1 {Œ}{{\OE}}1 {æ}{{\ae}}1 {Æ}{{\AE}}1 {ß}{{\ss}}1
        {ç}{{\c c}}1 {Ç}{{\c C}}1 {ø}{{\o}}1 {å}{{\r a}}1 {Å}{{\r A}}1
        {€}{{\euro}}1 {£}{{\pounds}}1
}
\lstset{autogobble=true}
\lstdefinestyle{Java}{
    language=Java,
    morekeywords={String, interface, implements, class}
}
\lstdefinestyle{Python}{
    language=Python,
    keywordstyle=\color{teal}
}
\captionsetup[lstlisting]{
    labelfont=md,
    textfont=md,
    singlelinecheck=true,
    justification=raggedright,
    labelsep=space,
    format=hang,
    indention=0pt,
    aboveskip=10pt,
    belowskip=5pt
}

% Untuk definisi teorema
\usepackage{amsthm}
\theoremstyle{plain}
\newtheorem{theorem}{Teorema}[section]
\newtheorem{corollary}[theorem]{Korolari}
\theoremstyle{definition}
\newtheorem{definition}{Definisi}[section]
\theoremstyle{remark}
\newtheorem*{remark}{Catatan}
\newtheorem{example}{Contoh}[section]

% Untuk shadow gambar
\usepackage{fancybox, graphicx}

% Untuk cite url
\usepackage{url}
\usepackage{microtype}

\usepackage{siunitx}
\usepackage{multirow}
\usepackage[normalem]{ulem}
\useunder{\uline}{\ul}{}

\usepackage{array}
\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}}
\newcolumntype{M}[1]{>{\centering\arraybackslash}m{#1}}

% Indentasi rumus
\setlength{\mathindent}{1.5cm}

\makeatletter
\def\input@path{{include/}}
\makeatother

% Sampul Depan
\include{sampul-depan}

% Pengaturan header dan footer
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyfoot[R]{\thepage}
\fancypagestyle{plain}{
  \fancyhf{}
  \fancyfoot[C]{\thepage}
  \renewcommand{\headrulewidth}{0pt}
}

% Untuk daftar program
\makeatletter
\begingroup\let\newcounter\@gobble\let\setcounter\@gobbletwo
\globaldefs\@ne \let\c@loldepth\@ne
\newlistof{listings}{lol}{\lstlistlistingname}
\endgroup
\let\l@lstlisting\l@listings
\AtBeginDocument{\addtocontents{lol}{\protect\addvspace{10\p@}}}
\makeatother
\renewcommand{\lstlistoflistings}{\listoflistings}
\renewcommand\cftlistingspresnum{Program~}
\cftsetindents{listings}{1.5em}{7em}

% Pengaturan daftar pustaka
\setlength{\bibhang}{30pt}

\begin{document}
\fancyhf{} 
\fancyfoot[C]{\thepage}

\cover
\approvalpage

% Kata Pengantar
\include{kata-pengantar}

% Daftar Singkatan
\include{daftar-singkatan}

% Abstrak
\include{abstrak-indonesia}
\include{abstrak-english}

\titleformat{\section}{\normalfont\bfseries\uppercase}{\thesection}{1.7em}{}
\titleformat{\subsection}{\normalfont\bfseries}{\thesubsection}{0.9em}{}

% Table of Contents dan Daftar lainnya
\addtocontents{toc}{\protect\thispagestyle{empty}}
\addcontentsline{toc}{chapter}{Daftar Isi}
\begin{singlespace}
  \tableofcontents
\end{singlespace}
\listoftables
\addtocontents{toc}{\protect\addvspace{1ex}\protect\addcontentsline{toc}{chapter}{Daftar Tabel}}
\listoffigures
\addtocontents{toc}{\protect\addvspace{1ex}\protect\addcontentsline{toc}{chapter}{Daftar Gambar}}
\lstlistoflistings
\addtocontents{toc}{\protect\addvspace{1ex}\protect\addcontentsline{toc}{chapter}{Daftar Program}}
\listofappendices
\addtocontents{toc}{\protect\addvspace{1ex}\protect\addcontentsline{toc}{chapter}{Daftar Lampiran}}

% Daftar Singkatan (kedua)
\include{daftar-singkatan}

\enableboldchapterintoc

% Caption untuk code snippet
\renewcommand{\thelstlisting}{\arabic{chapter}.\arabic{lstlisting}}
\renewcommand*\lstlistingname{Program}

% Mulai isi bab dengan spasi 1,5
\begin{onehalfspace}
\pagenumbering{arabic}

\captionsetup[figure]{labelfont={normalfont}, textfont={normalfont}, singlelinecheck=true, justification=raggedright, labelsep=space, format=hang, indention=0pt, skip=10pt}
\captionsetup[table]{labelfont={normalfont}, textfont={normalfont}, singlelinecheck=true, justification=raggedright, labelsep=space, format=hang, indention=0pt, skip=10pt}

\fancyhf{}
\fancyfoot[R]{\thepage}

\include{bab1}
\include{bab2}
\include{bab3}
\include{bab4}
\include{bab5}

\fancypagestyle{daftarpustaka}{
  \fancyhf{}
  \renewcommand{\headrulewidth}{0pt}
  \fancyfoot[]{\thepage}
}

\AtBeginEnvironment{thebibliography}{%
  \clearpage
  \addcontentsline{toc}{chapter}{DAFTAR KEPUSTAKAAN}
  \pagestyle{daftarpustaka}
  \onehalfspacing
}

% Tampilkan daftar pustaka
\printbibliography[heading=bibintoc, title={DAFTAR KEPUSTAKAAN}]

% Lampiran
\addcontentsline{toc}{chapter}{LAMPIRAN}
\include{lampiran}

\end{onehalfspace}
\end{document}